<!DOCTYPE html>
<html>
<head>
  <title>Shipping Cost Calculator</title>
  <script>
    function calculateShippingCost() {
      // Get user inputs
      var x1 = parseInt(document.getElementById("quantity").value);
      var x2 = parseInt(document.getElementById("maxPerPallet").value);
      var modelOrAccessory = document.querySelector('input[name="modelOrAccessory"]:checked').value;
      var pickupOrDelivery = document.querySelector('input[name="pickupOrDelivery"]:checked').value;

      // Function to calculate the integer part of y
      function cut(y, min, max) {
        return Math.min(Math.max(y * 5, min), max);
      }

      // Function to check if a is fully divisible by b
      function isFullyDivisible(a, b) {
        if (a % b === 0) {
          return 1; // a is fully divisible by b
        } else {
          return 0; // a is not fully divisible by b
        }
      }

      // Calculate shipping cost
      var shippingCost;
      var formula = "Shipping Cost Formula: ";

      if (modelOrAccessory === 'model') {
        formula += "1.65 * (x1 / x2) + 3.75 * x1 + 4.5 * (Math.floor((x1 - 1) / x2) + 1) + 0.2 * (Math.floor(x1 / x2) + (x1 - x2 * Math.floor(x1 / x2))) + 15 + isFullyDivisible(x1, x2) * 24.5";
        shippingCost = 1.65 * (x1 / x2) + 3.75 * x1 + 4.5 * (Math.floor((x1 - 1) / x2) + 1) + 0.2 * (Math.floor(x1 / x2) + (x1 - x2 * Math.floor(x1 / x2))) + 15 + isFullyDivisible(x1, x2) * 24.5;
      } else if (modelOrAccessory === 'accessory') {
        formula += "0.55 * (x1 / x2) + 4.5 * (Math.floor((x1 - 1) / x2) + 1) + 0.2 * (Math.floor(x1 / x2) + (x1 - x2 * Math.floor(x1 / x2))) + 15 + isFullyDivisible(x1, x2) * 24.5";
        shippingCost = 0.55 * (x1 / x2) + 4.5 * (Math.floor((x1 - 1) / x2) + 1) + 0.2 * (Math.floor(x1 / x2) + (x1 - x2 * Math.floor(x1 / x2))) + 15 + isFullyDivisible(x1, x2) * 24.5;
      }

      // If delivery is through fox, add additional cost
      if (pickupOrDelivery === 'fox') {
        var additionalCost = 35 + cut((x1 / x2), 35, 100);
        formula += " + (35 + cut((x1 / x2), 35, 100))";
        shippingCost += additionalCost;
      }

      // Display the shipping cost and formula
      document.getElementById("result").innerHTML = "Shipping Cost: $" + shippingCost.toFixed(2);
      document.getElementById("formula").innerHTML = formula + "<br><br>Total Cost: $" + shippingCost.toFixed(2);
    }
  </script>
</head>
<body>
  <h1>Shipping Cost Calculator</h1>
  <form>
    <label for="quantity">Quantity of Product to Send:</label>
    <input type="number" id="quantity" name="quantity" min="1" required><br><br>

    <label for="maxPerPallet">Maximum Product per Pallet:</label>
    <input type="number" id="maxPerPallet" name="maxPerPallet" min="1" required><br><br>

    <label>Model or Accessory:</label><br>
    <input type="radio" id="model" name="modelOrAccessory" value="model" required>
    <label for="model">Model</label><br>
    <input type="radio" id="accessory" name="modelOrAccessory" value="accessory">
    <label for="accessory">Accessory</label><br><br>

    <label>Pickup or Fox Delivery:</label><br>
    <input type="radio" id="pickup" name="pickupOrDelivery" value="pickup" required>
    <label for="pickup">Self Pickup</label><br>
    <input type="radio" id="fox" name="pickupOrDelivery" value="fox">
    <label for="fox">Fox Delivery</label><br><br>

    <button type="button" onclick="calculateShippingCost()">Calculate Shipping Cost</button>
  </form>

  <div id="result"></div>
  <div id="formula"></div>
</body>
</html>
